jQuery(document).ready(function(e){e("div#ws-menu-page-js-c-w").hide(),e(window).resize(tb_position=function(){var i=e(window).width()>720?720:e(window).width(),t=e(window).height(),s=e("body.admin-bar").length?28:0;e("#TB_window").css({width:i-50+"px",height:t-45-s+"px",top:25+s+"px","margin-top":0,"margin-left":"-"+parseInt((i-50)/2,10)+"px"}),e("#TB_ajaxContent").css({width:i-50+"px",height:t-75-s+"px",margin:0,padding:0})});var i=e("div.ws-menu-page-group");i.each(function(t){var s=e(this),r="<ins>+</ins>",n=s,a=e.trim(n.attr("title")),o=e('<div class="ws-menu-page-group-header">'+r+a+"</div>");o.css({"z-index":100-t}),o.insertBefore(n),n.hide(),o.click(function(){var i=e(this),t=e("ins",i),s=i.next();return"none"===s.css("display")?(i.addClass("open"),t.html("-"),s.show()):(i.removeClass("open"),t.html("+"),s.hide()),!1}),i.length>1&&0===t&&(e('<div class="ws-menu-page-groups-show">+</div>').insertBefore(o).click(function(){return e("div.ws-menu-page-group-header").each(function(){var i=e(this),t=e("ins",i),s=i.next();i.addClass("open"),t.html("-"),s.show()}),!1}),e('<div class="ws-menu-page-groups-hide">-</div>').insertBefore(o).click(function(){return e("div.ws-menu-page-group-header").each(function(){var i=e(this),t=e("ins",i),s=i.next();i.removeClass("open"),t.html("+"),s.hide()}),!1})),"open"===n.attr("default-state")&&o.trigger("click")}),i.length>1&&(e("div.ws-menu-page-group-header:first").css({"margin-right":"140px"}),e("div.ws-menu-page-group:first").css({"margin-right":"145px"})),e("div.ws-menu-page-r-group-header").click(function(){var i=e(this),t=i.next("div.ws-menu-page-r-group");return"none"===t.css("display")?(e("ins",i).html("-"),i.addClass("open"),t.show()):(e("ins",i).html("+"),i.removeClass("open"),t.hide()),!1}),e("div.ws-menu-page-group-header:first, div.ws-menu-page-r-group-header:first").css({"margin-top":"0"}),e("div.ws-menu-page-group > div.ws-menu-page-section:first-child > h3").css({"margin-top":"0"}),e("div.ws-menu-page-readme > div.readme > div.section:last-child").css({"border-bottom-width":"0"}),e("input.ws-menu-page-media-btn").filter(function(){return e(this).attr("rel")?!0:!1}).click(function(){var i=e(this);return window.send_to_editor=function(t){var s,r,n=e.trim(i.attr("rel"));if(n&&(s=e("input#"+n)).length>0){var a=s.css("background-color"),o=e.trim(e(t).attr("src"));return o=o?o:e.trim(e("img",t).attr("src")),s.val(o),s.css({"background-color":"#FFFFCC"}),setTimeout(function(){s.css({"background-color":a})},2e3),void tb_remove()}if(n&&(r=e("textarea#"+n)).length>0){var a=r.css("background-color"),o=e.trim(e(t).attr("src"));return o=o?o:e.trim(e("img",t).attr("src")),r.val(e.trim(r.val())+"\n"+o),r.css({"background-color":"#FFFFCC"}),setTimeout(function(){r.css({"background-color":a})},2e3),void tb_remove()}},tb_show("","./media-upload.php?type=image&TB_iframe=true"),!1}),e("form#ws-updates-form").submit(function(){var i="";return e.trim(e("input#ws-updates-fname").val())||(i+="First Name missing, please try again.\n\n"),e.trim(e("input#ws-updates-lname").val())||(i+="Last Name missing, please try again.\n\n"),e.trim(e("input#ws-updates-email").val())?e("input#ws-updates-email").val().match(/^([a-z_~0-9\+\-]+)(((\.?)([a-z_~0-9\+\-]+))*)(@)([a-z0-9]+)(((-*)([a-z0-9]+))*)(((\.)([a-z0-9]+)(((-*)([a-z0-9]+))*))*)(\.)([a-z]{2,6})$/i)||(i+="Invalid email address, please try again.\n\n"):i+="Email missing, please try again.\n\n",(i=e.trim(i))?(alert("— Oops, you missed something: —\n\n"+i),!1):!0}),e("#ws-plugin--optimizemember-new-options-form").submit(function(e){return e.preventDefault(),jQuery.post(ajaxurl,jQuery(this).serialize(),function(e){"undefined"!=typeof e.error?alert(e.error):jQuery("#msg, .save_info").html(e).show().delay(2e3).fadeOut()}),!1}),e(".ws_plugin__optimizemember_level_provider").change(function(e){var i=jQuery(this).val(),t=jQuery(this).attr("data-level"),s=jQuery("#ws_plugin__optimizemember_level"+t+"_list"),r=jQuery("#ws_plugin__optimizemember_level"+t+"_list_label");"infusionsoft"===i?r.html("Follow up sequence:"):"arpreach"===i?r.html("Autoresponder:"):r.html("List:"),"arpreach"===i&&s.is("select")?(s.parent().append('<input type="text" data-level="'+t+'" name="ws_plugin__optimizemember_level'+t+'_list" id="ws_plugin__optimizemember_level'+t+'_list" class="ws_plugin__optimizemember_level_list"/>'),s.remove(),s=jQuery("#ws_plugin__optimizemember_level"+t+"_list")):s.not("select")&&(s.parent().append('<select type="text" data-level="'+t+'" name="ws_plugin__optimizemember_level'+t+'_list" id="ws_plugin__optimizemember_level'+t+'_list" class="ws_plugin__optimizemember_level_list"></select>'),s.remove(),s=jQuery("#ws_plugin__optimizemember_level"+t+"_list")),"undefined"==typeof OptimizePress.lists&&(OptimizePress.lists={}),0==i?(s.empty(),s.append('<option value="0">Select provider first</option>')):"undefined"!=typeof OptimizePress.lists[i]?(s.empty(),s.append(OptimizePress.lists[i])):"arpreach"!==i&&(s.after('<img class="op-bsw-waiting" src="images/wpspin_light.gif" alt="loading" style="position:relative;display:block;top:4px">'),jQuery.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-email-provider-items",provider:i,special:1},function(e){var t=[];jQuery.each(e.lists,function(e,i){t.push('<option value="'+e+'">'+i.name+"</option>")}),OptimizePress.lists[i]=t,s.empty().append(t),s.next().remove()},"json"))})});